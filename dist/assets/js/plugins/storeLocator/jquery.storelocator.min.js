/*! jQuery Google Maps Store Locator - v1.4.9 - 2014-10-19
* http://www.bjornblog.com/web/jquery-store-locator-plugin
* Copyright (c) 2014 Bjorn Holine; Licensed MIT */

!function(a,b,c,d){"use strict";function e(b,c){g=a(b),this.element=b,this.settings=a.extend({},C,c),this._defaults=C,this._name=f,this.init()}var f="storeLocator";if("undefined"==typeof a.fn[f]){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=[],v=[],w=[],x=[],y={},z={},A={},B={},C={mapID:"bh-sl-map",locationList:"bh-sl-loc-list",formContainer:"bh-sl-form-container",formID:"bh-sl-user-location",addressID:"bh-sl-address",regionID:"bh-sl-region",mapSettings:{zoom:12,mapTypeId:google.maps.MapTypeId.ROADMAP},markerImg:null,markerDim:null,catMarkers:null,lengthUnit:"m",storeLimit:26,distanceAlert:60,dataType:"xml",dataLocation:"data/locations.xml",xmlElement:"marker",listColor1:"#ffffff",listColor2:"#eeeeee",originMarker:!1,originMarkerImg:null,originMarkerDim:null,bounceMarker:!0,slideMap:!0,modal:!1,overlay:"bh-sl-overlay",modalWindow:"bh-sl-modal-window",modalContent:"bh-sl-modal-content",closeIcon:"bh-sl-close-icon",defaultLoc:!1,defaultLat:null,defaultLng:null,autoGeocode:!1,maxDistance:!1,maxDistanceID:"bh-sl-maxdistance",fullMapStart:!1,noForm:!1,loading:!1,loadingContainer:"bh-sl-loading",featuredLocations:!1,pagination:!1,locationsPerPage:10,inlineDirections:!1,nameSearch:!1,searchID:"bh-sl-search",nameAttribute:"name",infowindowTemplatePath:"assets/js/plugins/storeLocator/templates/infowindow-description.html",listTemplatePath:"assets/js/plugins/storeLocator/templates/location-list-description.html",KMLinfowindowTemplatePath:"assets/js/plugins/storeLocator/templates/kml-infowindow-description.html",KMLlistTemplatePath:"assets/js/plugins/storeLocator/templates/kml-location-list-description.html",listTemplateID:null,infowindowTemplateID:null,taxonomyFilters:null,taxonomyFiltersContainer:"bh-sl-filters-container",querystringParams:!1,callbackBeforeSend:null,callbackSuccess:null,callbackModalOpen:null,callbackModalClose:null,jsonpCallback:null,geocodeErrorAlert:"Geocode was not successful for the following reason: ",addressErrorAlert:"Unable to find address",autoGeocodeErrorAlert:"Automatic location detection failed. Please fill in your address or zip code.",distanceErrorAlert:"Unfortunately, our closest location is more than ",mileLang:"mile",milesLang:"miles",kilometerLang:"kilometer",kilometersLang:"kilometers",noResultsTitle:"No results",noResultsDesc:"No locations were found with the given criteria. Please modify your selections or input.",nextPage:"Next &raquo;",prevPage:"&laquo; Prev"};a.extend(e.prototype,{init:function(){A.EarthRadius="km"===this.settings.lengthUnit?6367:3956,j="kml"===this.settings.dataType?"xml":this.settings.dataType,this.settings.inlineDirections===!0&&(s=new google.maps.DirectionsRenderer,t=new google.maps.DirectionsService,a("."+this.settings.locationList).prepend('<div class="bh-sl-directions-panel"></div>')),m=this.settings.mapSettings.zoom,Handlebars.registerHelper("niceURL",function(a){return a?a.replace("https://","").replace("http://",""):void 0}),null!==this.settings.taxonomyFilters&&this.taxonomyFiltering(),this.settings.modal===!0&&(null!==this.settings.taxonomyFilters&&a("."+this.settings.taxonomyFiltersContainer).clone(!0,!0).prependTo(g),g.wrap('<div class="'+this.settings.overlay+'"><div class="'+this.settings.modalWindow+'"><div class="'+this.settings.modalContent+'">'),a("."+this.settings.modalWindow).prepend('<div class="'+this.settings.closeIcon+'"></div>'),a("."+this.settings.overlay).hide()),this.loadTemplates()},destroy:function(){this.reset();var b=a("#"+this.settings.mapID);if(x.length)for(var d=0;d<=x.length;d++)google.maps.event.removeListener(x[d]);a("."+this.settings.locationList+" ul").empty(),b.hasClass("bh-sl-map-open")&&b.empty().removeClass("bh-sl-map-open"),this.settings.modal===!0&&a(". "+this.settings.overlay).remove(),b.attr("style",""),g.hide(),a.removeData(g.get(0)),a(c).off(f),g.unbind()},reset:function(){v=[],u=[],w=[],x=[],a(c).off("click."+f,"."+this.settings.locationList+" li")},notify:function(a){alert(a)},geoCodeCalcToRadian:function(a){return a*(Math.PI/180)},geoCodeCalcDiffRadian:function(a,b){return this.geoCodeCalcToRadian(b)-this.geoCodeCalcToRadian(a)},geoCodeCalcCalcDistance:function(a,b,c,d,e){return 2*e*Math.asin(Math.min(1,Math.sqrt(Math.pow(Math.sin(this.geoCodeCalcDiffRadian(a,c)/2),2)+Math.cos(this.geoCodeCalcToRadian(a))*Math.cos(this.geoCodeCalcToRadian(c))*Math.pow(Math.sin(this.geoCodeCalcDiffRadian(b,d)/2),2))))},getQueryString:function(a){if(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(location.search);return null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))}},loadTemplates:function(){var b,c=this,d='<div class="bh-sl-error">Error: Could not load plugin templates. Check the paths and ensure they have been uploaded. Paths will be wrong if you do not run this from a web server.</div>';"kml"===this.settings.dataType&&null===this.settings.listTemplateID&&null===this.settings.infowindowTemplateID?a.when(a.get(this.settings.KMLinfowindowTemplatePath,function(a){b=a,i=Handlebars.compile(b)}),a.get(this.settings.KMLlistTemplatePath,function(a){b=a,h=Handlebars.compile(b)})).then(function(){c.locator()},function(){throw a("."+c.settings.formContainer).append(d),new Error("Could not load storeLocator plugin templates")}):null!==this.settings.listTemplateID&&null!==this.settings.infowindowTemplateID?(i=Handlebars.compile(a(this.settings.infowindowTemplateID).html()),h=Handlebars.compile(a(this.settings.listTemplateID).html()),c.locator()):a.when(a.get(this.settings.infowindowTemplatePath,function(a){b=a,i=Handlebars.compile(b)}),a.get(this.settings.listTemplatePath,function(a){b=a,h=Handlebars.compile(b)})).then(function(){c.locator()},function(){throw a("."+c.settings.formContainer).append(d),new Error("Could not load storeLocator plugin templates")})},locator:function(){this.settings.slideMap===!0&&g.hide(),this.start(),this.formEventHandler()},formEventHandler:function(){var b=this;this.settings.noForm===!0?(a(c).on("click."+f,"."+this.settings.formContainer+" button",function(a){b.processForm(a)}),a(c).on("keyup."+f,function(c){13===c.keyCode&&a("#"+b.settings.addressID).is(":focus")&&b.processForm(c)})):a(c).on("submit."+f,"#"+this.settings.formID,function(a){b.processForm(a)})},_getData:function(b,c,d){var e=this,f=a.Deferred();return this.settings.callbackBeforeSend&&this.settings.callbackBeforeSend.call(this),this.settings.loading===!0&&a("."+this.settings.formContainer).append('<div class="'+this.settings.loadingContainer+'"></div>'),a.ajax({type:"GET",url:this.settings.dataLocation+("jsonp"===this.settings.dataType?(this.settings.dataLocation.match(/\?/)?"&":"?")+"callback=?":""),data:{origLat:b,origLng:c,origAddress:d},dataType:j,jsonpCallback:"jsonp"===this.settings.dataType?this.settings.jsonpCallback:null}).done(function(b){f.resolve(b),e.settings.loading===!0&&a("."+e.settings.formContainer+" ."+e.settings.loadingContainer).remove()}).fail(f.reject),f.promise()},countFilters:function(){var a=0;if(!this.isEmptyObject(y))for(var b in y)y.hasOwnProperty(b)&&(a+=y[b].length);return a},checkFilters:function(){a.each(this.settings.taxonomyFilters,function(b,c){a(c+" input[type=checkbox]").each(function(){if(a(this).prop("checked")){var c=a(this).attr("id");-1===y[b].indexOf(c)&&y[b].push(c)}}),a(c+" select").each(function(){var c=a(this).attr("id");-1===y[b].indexOf(c)&&y[b].push(c)})})},getFilterKey:function(a){for(var b in this.settings.taxonomyFilters)if(this.settings.taxonomyFilters.hasOwnProperty(b))for(var c=0;c<this.settings.taxonomyFilters[b].length;c++)if(this.settings.taxonomyFilters[b]===a)return b},start:function(){var a=this;if(this.settings.defaultLoc===!0){var b=new this.reverseGoogleGeocode,c=new google.maps.LatLng(this.settings.defaultLat,this.settings.defaultLng);b.geocode({latLng:c},function(b){if(null!==b){var c=b.address;B.lat=a.settings.defaultLat,B.lng=a.settings.defaultLng,B.origin=c,a.mapping(B)}else a.notify(a.settings.addressErrorAlert)})}this.settings.fullMapStart===!0&&(this.settings.querystringParams===!0&&this.getQueryString(this.settings.addressID)||this.getQueryString(this.settings.searchID)?this.processForm(null):this.mapping(null)),this.settings.autoGeocode===!0&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(b){a.autoGeocodeQuery(b)},function(b){a.autoGeocodeError(b)})},googleGeocode:function(){var a=this,b=new google.maps.Geocoder;this.geocode=function(c,d){b.geocode(c,function(b,c){if(c===google.maps.GeocoderStatus.OK){var e={};e.latitude=b[0].geometry.location.lat(),e.longitude=b[0].geometry.location.lng(),d(e)}else a.notify(a.settings.geocodeErrorAlert+c),d(null)})}},reverseGoogleGeocode:function(){var a=this,b=new google.maps.Geocoder;this.geocode=function(c,d){b.geocode(c,function(b,c){if(c===google.maps.GeocoderStatus.OK){if(b[0]){var e={};e.address=b[0].formatted_address,d(e)}}else a.notify(a.settings.geocodeErrorAlert+c),d(null)})}},roundNumber:function(a,b){return Math.round(a*Math.pow(10,b))/Math.pow(10,b)},isEmptyObject:function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},modalClose:function(){this.settings.callbackModalOpen&&this.settings.callbackModalOpen.call(this),y={},a("."+this.settings.overlay+" select").prop("selectedIndex",0),a("."+this.settings.overlay+" input").prop("checked",!1),a("."+this.settings.overlay).hide()},createLocationVariables:function(a){var b;for(var c in v[a])v[a].hasOwnProperty(c)&&(b=v[a][c],"distance"===c&&(b=this.roundNumber(b,2)),z[c]=b)},sortNumerically:function(a){a.sort(function(a,b){return a.distance<b.distance?-1:a.distance>b.distance?1:0})},filterData:function(a,b){var c=!0;for(var d in b)b.hasOwnProperty(d)&&(new RegExp(b[d].join(""),"i").test(a[d])||(c=!1));return c?!0:void 0},paginationOutput:function(a,b){a=parseFloat(a);var c="",d=a+1,e=a-1;a>0&&(c+='<li class="bh-sl-next-prev" data-page="'+e+'">'+this.settings.prevPage+"</li>");for(var f=0;b>f;f++){var g=f+1;c+=f===a?'<li class="bh-sl-current" data-page="'+f+'">'+g+"</li>":'<li data-page="'+f+'">'+g+"</li>"}return b>d&&(c+='<li class="bh-sl-next-prev" data-page="'+d+'">'+this.settings.nextPage+"</li>"),c},paginationSetup:function(b){var c="",d=v.length/this.settings.locationsPerPage,e=a(".bh-sl-pagination-container .bh-sl-pagination");"undefined"==typeof b&&(b=0),0===e.length?c=this.paginationOutput(b,d):(e.empty(),c=this.paginationOutput(b,d)),e.append(c)},markerImage:function(a,b,c){var d;return d="undefined"!=typeof b&&"undefined"!=typeof c?{url:a,size:new google.maps.Size(b,c)}:{url:a,size:new google.maps.Size(32,32)}},createMarker:function(a,b,c,d,e,f){var g,h,i,j=[];if("undefined"!=typeof f&&f.length&&(f=f.replace(/\s+/g,"")),null!==this.settings.catMarkers)if(-1!==f.indexOf(",")){j=f.split(",");for(var k=0;k<j.length;k++)j[k]in this.settings.catMarkers&&(h=this.markerImage(this.settings.catMarkers[j[k]][0],this.settings.catMarkers[j[k]][1],this.settings.catMarkers[j[k]][2]))}else f in this.settings.catMarkers&&(h=this.markerImage(this.settings.catMarkers[f][0],this.settings.catMarkers[f][1],this.settings.catMarkers[f][2]));return null!==this.settings.markerImg&&(h=this.markerImage(this.settings.markerImg,this.settings.markerDim.width,this.settings.markerDim.height)),-1===this.settings.storeLimit||this.settings.storeLimit>26||null!==this.settings.catMarkers?g=new google.maps.Marker({position:a,map:e,draggable:!1,icon:h}):(i={url:"https://mt.googleapis.com/vt/icon/name=icons/spotlight/spotlight-waypoint-b.png&text="+d+"&psize=16&font=fonts/Roboto-Regular.ttf&color=ff333333&ax=44&ay=48"},g=new google.maps.Marker({position:a,map:e,icon:i,draggable:!1})),g},defineLocationData:function(b,c,d){var e="";this.createLocationVariables(b.get("id"));var f;f=z.distance<=1?"km"===this.settings.lengthUnit?this.settings.kilometerLang:this.settings.mileLang:"km"===this.settings.lengthUnit?this.settings.kilometersLang:this.settings.milesLang;var g=b.get("id");return e=-1===this.settings.storeLimit||this.settings.storeLimit>26?g+1:String.fromCharCode(d>0?"A".charCodeAt(0)+(c+g):"A".charCodeAt(0)+g),{location:[a.extend(z,{markerid:g,marker:e,length:f,origin:o})]}},listSetup:function(b,c,d){var e=this.defineLocationData(b,c,d),f=h(e);a("."+this.settings.locationList+" ul").append(f)},createInfowindow:function(b,c,d,e,f){var g=this,h=this.defineLocationData(b,e,f),j=i(h);"left"===c?(d.setContent(j),d.open(b.get("map"),b)):google.maps.event.addListener(b,"click",function(){d.setContent(j),d.open(b.get("map"),b),a("."+g.settings.locationList+" li").removeClass("list-focus");var c=b.get("id"),e=a("."+g.settings.locationList+" li[data-markerid="+c+"]");e.addClass("list-focus");var f=a("."+g.settings.locationList);f.animate({scrollTop:e.offset().top-f.offset().top+f.scrollTop()})})},autoGeocodeQuery:function(a){var b=this,c={},d=new this.reverseGoogleGeocode,e=new google.maps.LatLng(a.coords.latitude,a.coords.longitude);d.geocode({latLng:e},function(d){if(null!==d){var e=d.address;c.lat=a.coords.latitude,c.lng=a.coords.longitude,c.origin=e,b.mapping(c)}else b.notify(b.settings.addressErrorAlert)})},autoGeocodeError:function(){this.notify(this.settings.autoGeocodeErrorAlert)},paginationChange:function(a){B.page=a,this.mapping(B)},getAddressByMarker:function(a){var b=null;return v[a].address&&(b+=v[a].address+" "),v[a].address2&&(b+=v[a].address2+" "),v[a].city&&(b+=v[a].city+", "),v[a].state&&(b+=v[a].state+" "),v[a].postal&&(b+=v[a].postal+" "),v[a].country&&(b+=v[a].country+" "),b},clearMarkers:function(){for(var a=0;a<v.length;a++)x[a].setMap(null)},directionsRequest:function(b,d,e){var f=this.getAddressByMarker(d);if(f){a("."+this.settings.locationList+" ul").hide(),this.clearMarkers(),s.setMap(e),s.setPanel(a(".bh-sl-directions-panel").get(0));var g={origin:b,destination:f,travelMode:google.maps.TravelMode.DRIVING};t.route(g,function(a,b){b===google.maps.DirectionsStatus.OK&&s.setDirections(a)}),a("."+this.settings.locationList).prepend('<div class="bh-sl-close-directions-container"><div class="'+this.settings.closeIcon+'"></div></div>')}a(c).off("click","."+this.settings.locationList+" li .loc-directions a")},closeDirections:function(){a(".bh-sl-close-directions-container").remove(),a("."+this.settings.locationList+" .adp").remove(),a("."+this.settings.locationList+" ul").fadeIn(),this.reset(),p&&q&&(this.settings.mapSettings.zoom=0===this.countFilters()?m:0,this.processForm(null)),a(c).off("click."+f,"."+this.settings.locationList+" .bh-sl-close-icon")},processForm:function(b){var c=this,d=null;"undefined"!=typeof b&&null!==b&&b.preventDefault(),this.settings.maxDistance===!0&&(d=a("#"+this.settings.maxDistanceID).val()),this.settings.querystringParams===!0&&(this.getQueryString(this.settings.addressID)||this.getQueryString(this.settings.searchID))?(o=this.getQueryString(this.settings.addressID),n=this.getQueryString(this.settings.searchID)):(o=a("#"+this.settings.addressID).val(),n=a("#"+this.settings.searchID).val());var e=a("#"+this.settings.regionID).val();if(""===o&&""===n)this.start();else if(""!==o){var f=new this.googleGeocode;f.geocode({address:o,region:e},function(a){null!==a?(p=a.latitude,q=a.longitude,B.lat=p,B.lng=q,B.origin=o,B.name=n,B.distance=d,c.mapping(B)):c.notify(c.settings.addressErrorAlert)})}else""!==n&&(B.name=n,c.mapping(B))},mapping:function(d){var e,h,i,j,m,o,s,t,z,B,C,D,E,F=this,G=0;if(this.isEmptyObject(d)||(e=d.lat,h=d.lng,i=d.origin,j=d.name,m=d.distance,o=d.page),google.maps.visualRefresh=!0,"undefined"==typeof o&&(o=0),"undefined"==typeof i&&this.settings.nameSearch===!0)l=F._getData();else{var H=new google.maps.LatLng(e,h);l=F._getData(p,q,i)}l.done(function(d){var j=a("#"+F.settings.mapID),l="km"===F.settings.lengthUnit?F.settings.kilometersLang:F.settings.milesLang;if(k=d,F.settings.callbackSuccess&&F.settings.callbackSuccess.call(this),F.settings.fullMapStart===!0&&j.hasClass("bh-sl-map-open")===!1?s=!0:F.reset(),j.addClass("bh-sl-map-open"),"json"===F.settings.dataType||"jsonp"===F.settings.dataType?a.each(d,function(){var a,b,c={};for(a in this)this.hasOwnProperty(a)&&(b=this[a],c[a]=b);if("undefined"!=typeof i&&(c.distance||(c.distance=F.geoCodeCalcCalcDistance(e,h,c.lat,c.lng,A.EarthRadius))),F.settings.maxDistance===!0&&s!==!0&&null!==m){if(!(c.distance<m))return;v[G]=c}else v[G]=c;G++}):"kml"===F.settings.dataType?a(d).find("Placemark").each(function(){var b={name:a(this).find("name").text(),lat:a(this).find("coordinates").text().split(",")[1],lng:a(this).find("coordinates").text().split(",")[0],description:a(this).find("description").text()};if("undefined"!=typeof i&&(b.distance||(b.distance=F.geoCodeCalcCalcDistance(e,h,b.lat,b.lng,A.EarthRadius))),F.settings.maxDistance===!0&&s!==!0&&m){if(!(b.distance<m))return;v[G]=b}else v[G]=b;G++}):a(d).find(F.settings.xmlElement).each(function(){var b={};if(a.each(this.attributes,function(a,c){b[c.name]=c.value}),"undefined"!=typeof i&&(b.distance||(b.distance=F.geoCodeCalcCalcDistance(e,h,b.lat,b.lng,A.EarthRadius))),F.settings.maxDistance===!0&&s!==!0&&m){if(!(b.distance<m))return;v[G]=b}else v[G]=b;G++}),F.settings.nameSearch===!0&&"undefined"!=typeof n&&(y[F.settings.nameAttribute]=[n]),null!==F.settings.taxonomyFilters||F.settings.nameSearch===!0){var p={};a.each(y,function(a,b){if(b.length>0)for(var c=0;c<b.length;c++)p[a]||(p[a]=[]),p[a][c]="(?=.*\\b"+b[c].replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")+"\\b)"}),F.isEmptyObject(p)||(v=a.grep(v,function(a){return F.filterData(a,p)}))}if(F.isEmptyObject(v)&&(j.hasClass("bh-sl-map-open")&&g.hide(),E=a('<li><div class="bh-sl-noresults-title">'+F.settings.noResultsTitle+'</div><br><div class="bh-sl-noresults-desc">'+F.settings.noResultsDesc+"</li>").hide().fadeIn(),v[0]={distance:0,lat:0,lng:0}),"undefined"!=typeof i&&F.sortNumerically(v),F.settings.featuredLocations===!0&&(u=a.grep(v,function(a){return"true"===a.featured}),w=a.grep(v,function(a){return"true"!==a.featured}),v=[],v=u.concat(w)),F.settings.maxDistance===!0&&s!==!0&&m){if("undefined"==typeof v[0]||v[0].distance>m)return void F.notify(F.settings.distanceErrorAlert+m+" "+l)}else-1!==F.settings.distanceAlert&&v[0].distance>F.settings.distanceAlert&&F.notify(F.settings.distanceErrorAlert+F.settings.distanceAlert+" "+l);if(F.settings.pagination===!0&&F.paginationSetup(o),F.settings.slideMap===!0&&g.slideDown(),F.settings.modal===!0&&(F.settings.callbackModalOpen&&F.settings.callbackModalOpen.call(this),a("."+F.settings.overlay).fadeIn(),a(c).on("click."+f,"."+F.settings.closeIcon+", ."+F.settings.overlay,function(){F.modalClose()}),a(c).on("click."+f,"."+F.settings.modalWindow,function(a){a.stopPropagation()}),a(c).on("keyup."+f,function(a){27===a.keyCode&&F.modalClose()})),r=-1===F.settings.storeLimit||v.length<F.settings.storeLimit?v.length:F.settings.storeLimit,F.settings.pagination===!0?(C=F.settings.locationsPerPage,B=o*F.settings.locationsPerPage,v=v.slice(B,B+C),r=v.length):(C=r,B=0),F.settings.fullMapStart===!0&&s===!0||0===F.settings.mapSettings.zoom||"undefined"==typeof i)D=F.settings.mapSettings,z=new google.maps.LatLngBounds;else if(F.settings.pagination===!0){var q=new google.maps.LatLng(v[0].lat,v[0].lng);0===o?(F.settings.mapSettings.center=H,D=F.settings.mapSettings):(F.settings.mapSettings.center=q,D=F.settings.mapSettings)}else F.settings.mapSettings.center=H,D=F.settings.mapSettings;var I=new google.maps.Map(c.getElementById(F.settings.mapID),D);google.maps.event.addDomListener(b,"resize",function(){var a=I.getCenter();google.maps.event.trigger(I,"resize"),I.setCenter(a)}),g.data(F.settings.mapID.replace("#",""),I);var J=new google.maps.InfoWindow;if(F.settings.originMarker===!0){var K="";if(F.settings.fullMapStart===!1&&s===!0)return;K=null!==F.settings.originMarkerImg?this.markerImage(F.settings.originMarkerImg,F.settings.originMarkerDim.width,F.settings.originMarkerDim.height):{url:"https://mt.googleapis.com/vt/icon/name=icons/spotlight/spotlight-waypoint-a.png"},t=new google.maps.Marker({position:H,map:I,icon:K,draggable:!1})}a(c).on("click."+f,".bh-sl-pagination li",function(){F.paginationChange(a(this).attr("data-page"))}),F.settings.inlineDirections===!0&&(a(c).on("click."+f,"."+F.settings.locationList+" li .loc-directions a",function(b){b.preventDefault();var c=a(this).closest("li").attr("data-markerid");F.directionsRequest(i,c,I)}),a(c).on("click."+f,"."+F.settings.locationList+" .bh-sl-close-icon",function(){F.closeDirections()}));for(var L=0;C-1>=L;L++){var M="";M=String.fromCharCode(o>0?"A".charCodeAt(0)+(B+L):"A".charCodeAt(0)+L);var N=new google.maps.LatLng(v[L].lat,v[L].lng);t=F.createMarker(N,v[L].name,v[L].address,M,I,v[L].category),t.set("id",L),x[L]=t,(F.settings.fullMapStart===!0&&s===!0||0===F.settings.mapSettings.zoom||"undefined"==typeof i)&&z.extend(N),F.createInfowindow(t,null,J,B,o)}(F.settings.fullMapStart===!0&&s===!0||0===F.settings.mapSettings.zoom||"undefined"==typeof i)&&I.fitBounds(z);var O=a("."+F.settings.locationList+" ul");O.empty(),0===v[0].lat&&0===v[0].lng?O.append(E):a(x).each(function(a){var b=x[a];F.listSetup(b,B,o)}),a(c).on("click."+f,"."+F.settings.locationList+" li",function(){var b=a(this).data("markerid"),c=x[b];a("."+F.settings.locationList+" li").removeClass("list-focus"),a("."+F.settings.locationList+" li[data-markerid="+b+"]").addClass("list-focus"),I.panTo(c.getPosition());var d="left";F.settings.bounceMarker===!0?(c.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){c.setAnimation(null),F.createInfowindow(c,d,J,B,o)},700)):F.createInfowindow(c,d,J,B,o)}),a(c).on("click."+f,"."+F.settings.locationList+" li a",function(a){a.stopPropagation()}),a("."+F.settings.locationList+" ul li:even").css("background",F.settings.listColor1),a("."+F.settings.locationList+" ul li:odd").css("background",F.settings.listColor2)})},taxonomyFiltering:function(){var b=this;a.each(this.settings.taxonomyFilters,function(a){y[a]=[]}),a("."+this.settings.taxonomyFiltersContainer).on("change."+f,"input, select",function(c){c.stopPropagation();var d,e,f;if(a(this).is('input[type="checkbox"]')){if(b.checkFilters(),d=a(this).val(),e=a(this).closest(".bh-sl-filters").attr("id"),f=b.getFilterKey(e))if(a(this).prop("checked"))y[f].push(d),a("#"+b.settings.mapID).hasClass("bh-sl-map-open")===!0&&(b.reset(),p&&q?(b.settings.mapSettings.zoom=0,b.processForm()):b.mapping(B));else{var g=y[f].indexOf(d);g>-1&&(y[f].splice(g,1),a("#"+b.settings.mapID).hasClass("bh-sl-map-open")===!0&&(b.reset(),p&&q?(b.settings.mapSettings.zoom=0===b.countFilters()?m:0,b.processForm()):b.mapping(B)))}}else(a(this).is("select")||a(this).is('input[type="radio"]'))&&(b.checkFilters(),d=a(this).val(),e=a(this).closest(".bh-sl-filters").attr("id"),f=b.getFilterKey(e),d?f&&(y[f]=[d],a("#"+b.settings.mapID).hasClass("bh-sl-map-open")===!0&&(b.reset(),p&&q?(b.settings.mapSettings.zoom=0,b.processForm()):b.mapping(B))):(f&&(y[f]=[]),b.reset(),p&&q?(b.settings.mapSettings.zoom=m,b.processForm()):b.mapping(B)))})}}),a.fn[f]=function(b){var c=arguments;if(b===d||"object"==typeof b)return this.each(function(){a.data(this,"plugin_"+f)||a.data(this,"plugin_"+f,new e(this,b))});if("string"==typeof b&&"_"!==b[0]&&"init"!==b){var g;return this.each(function(){var d=a.data(this,"plugin_"+f);d instanceof e&&"function"==typeof d[b]&&(g=d[b].apply(d,Array.prototype.slice.call(c,1))),"destroy"===b&&a.data(this,"plugin_"+f,null)}),g!==d?g:this}}}}(jQuery,window,document);